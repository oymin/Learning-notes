# Spring Boot 整合篇

1. 整合 mybatis 逆向工程

---

### 1. 整合 mybatis 逆向工程(maven)

1. 添加插件

```
<build>
    <plugins>
        <plugin>
            <groupId>org.mybatis.generator</groupId>
            <artifactId>mybatis-generator-maven-plugin</artifactId>
            <version>1.3.2</version>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.1.45</version>
                </dependency>
            </dependencies>
            <configuration>
                <!--配置文件的路径-->
                <configurationFile>${basedir}/src/main/resources/generatorConfig.xml</configurationFile>
                <overwrite>true</overwrite>
            </configuration>
        </plugin>
    </plugins>
</build>
```

2. 添加依赖

```
<dependencies>
    <!--  mybatis逆向工程jar包 -->
    <dependency>
        <groupId>org.mybatis.generator</groupId>
        <artifactId>mybatis-generator-core</artifactId>
        <version>1.3.2</version>
    </dependency>
</dependencies>
```

3. resources下创建 `generatorConfig.xml` 文件

4. properties中配置mybatis

```
# Mybatis
mybatis.typeAliasesPackage=com.xxx.dtboot.entity
mybatis.mapperLocations=classpath:mapper/*.xml

# Mybatis 下划线转驼峰配置，两者都可以
# mybatis.configuration.mapUnderscoreToCamelCase=true
mybatis.configuration.map-underscore-to-camel-case=true

# 增加控制台打印sql语句
mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl
```

5. mybatis 配置 mapper 扫描

```
@SpringBootApplication
@MapperScan("com.xxx.dtboot.dao") //项目中对应的mapper类的路径
public class DtbootApplication { //启动类
```

6. 运行 `mybatis-generator:generate`

7. 单元测试

  idea 注入mapper报错的，但不影响运行

  ```
  @RunWith(SpringRunner.class)
  @SpringBootTest
  public class DtbootApplicationTests {
     @Autowired
     private SysMenuMapper sysMenuMapper;

     @Test
     public void testSelectByPrimaryKey() {

        SysMenu sysMenu = sysMenuMapper.selectByPrimaryKey(1L);
        System.out.println(sysMenu.getName());
     }
  }
  ```

8. 解决注入 mapper 报错的问题
  ```
  @Component(value ="sysMenuMapper")
  public interface SysMenuMapper {
  ```

---
